# Trained Models Directory

This directory stores trained face recognition models.

## Files

### `encodings.pickle` (Generated by training)
**Created by:** `train_encodings.py`

**Contains:**
```python
{
    'encodings': [array([...]), array([...]), ...],  # 128-D face encodings
    'names': ['STUDENT_1', 'STUDENT_1', 'STUDENT_2', ...],  # Person labels
    'metadata': {
        'person_types': {'STUDENT_1': 'STUDENT', ...},
        'person_ids': {'STUDENT_1': 1, ...},
        'image_counts': {'STUDENT_1': 10, ...},
        'detection_method': 'hog'
    }
}
```

**Size:** Approximately 10KB per trained person

**How to Generate:**
```bash
cd ..
python train_encodings.py
```

## DNN Models (Optional)

For DNN face detection, download these Caffe models:

### 1. `deploy.prototxt`
- **Purpose:** Network architecture definition
- **Size:** ~30 KB
- **Download:** [GitHub - opencv/opencv](https://github.com/opencv/opencv/tree/master/samples/dnn/face_detector)

### 2. `res10_300x300_ssd_iter_140000.caffemodel`
- **Purpose:** Pre-trained weights
- **Size:** ~10 MB
- **Download:** [GitHub - opencv/opencv](https://github.com/opencv/opencv_3rdparty/tree/dnn_samples_face_detector_20170830)

**After downloading:**
```
models/
├── deploy.prototxt
├── res10_300x300_ssd_iter_140000.caffemodel
└── encodings.pickle
```

**Note:** If DNN models are not found, the system automatically falls back to Haar Cascade detection.

## Retrain Model

When to retrain:
- Added new people to dataset
- Removed people from dataset
- Changed training images
- Switched detection method (hog ↔ cnn)

How to retrain:
```bash
cd ..
python train_encodings.py --validate
```

## Backup

Recommended to backup `encodings.pickle` after training:

```bash
# Windows PowerShell
Copy-Item encodings.pickle encodings.pickle.backup

# Linux/Mac
cp encodings.pickle encodings.pickle.backup
```

## Troubleshooting

**File not found:**
```
FileNotFoundError: Encodings not found at models/encodings.pickle
```
**Solution:** Run training first: `python train_encodings.py`

**Old model not updating:**
Delete existing model and retrain:
```bash
Remove-Item encodings.pickle
python train_encodings.py
```

---

See `../README.md` for complete documentation.
